â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      âœ… ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ í”Œë¡œìš° ë§µ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

START: / â†’ redirect to /welcome
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PHASE 1: ì„±ê²© í…ŒìŠ¤íŠ¸ (Pre-Auth)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. /welcome
â”‚    â””â”€ "ì‹œì‘í•˜ê¸°" â†’ /personality-test
â”‚
â”‚ 2. /personality-test
â”‚    â”œâ”€ 6ê°€ì§€ ì„±ê²© ì§ˆë¬¸ ë‹µë³€
â”‚    â”œâ”€ ì ìˆ˜ ê³„ì‚° (0-100)
â”‚    â””â”€ âœ… ì €ì¥: sessionStorage
â”‚        â””â”€ personality_scores
â”‚        â””â”€ personality_answers
â”‚    â””â”€ ê²°ê³¼ í™”ë©´ â†’ "ê°„ë³‘ì¸ ì°¾ê¸°" ë²„íŠ¼
â”‚       â””â”€ router.push("/login")  ğŸ‘ˆ REDIRECT TO LOGIN
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 2: ë¡œê·¸ì¸ (Auth)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. /login
â”‚    â”œâ”€ Kakao OAuth ë˜ëŠ” ì†Œì…œ ë¡œê·¸ì¸
â”‚    â””â”€ âœ… ì €ì¥: localStorage/session
â”‚        â””â”€ auth_token
â”‚        â””â”€ user_id
â”‚    â””â”€ ë¡œê·¸ì¸ ì„±ê³µ â†’ router.push("/onboarding")
â”‚
â”‚ 4. /onboarding
â”‚    â””â”€ â†’ router.push("/patient-condition-1")
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 3: í™˜ì ì •ë³´ ì…ë ¥ (Patient Registration)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. /patient-condition-1 (ê¸°ë³¸ ì •ë³´)
â”‚    â”œâ”€ ì´ë¦„, ë‚˜ì´, ì„±ë³„, ê±°ì£¼ì§€ì—­
â”‚    â””â”€ âœ… ì €ì¥: sessionStorage
â”‚        â””â”€ patient_id (API ì‘ë‹µ)
â”‚    â””â”€ â†’ /patient-condition-2
â”‚
â”‚ 6. /patient-condition-2 (ê±´ê°• ì •ë³´)
â”‚    â”œâ”€ ì§ˆë³‘ëª…, ê±´ê°• ìƒíƒœ, ì²´ì¤‘/í‚¤
â”‚    â””â”€ âœ… ì €ì¥: sessionStorage
â”‚        â””â”€ health_conditions (ì„ì‹œ)
â”‚    â””â”€ â†’ /patient-condition-3
â”‚
â”‚ 7. /patient-condition-3 (ì•½ë¬¼ ì •ë³´)
â”‚    â”œâ”€ ë³µìš© ì¤‘ì¸ ì•½ë¬¼ ì…ë ¥
â”‚    â”œâ”€ API: POST /api/patients/{patient_id}/medications
â”‚    â””â”€ âœ… ì €ì¥: DB (medications table)
â”‚    â””â”€ â†’ /caregiver-finder
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 4: ê°„ë³‘ì¸ ì°¾ê¸° (Caregiver Search)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. /caregiver-finder
â”‚    â”œâ”€ ëŒë´„ ìœ í˜•, ì‹œê°„, ìš”ì¼, ê¸°ê°„ ì„ íƒ
â”‚    â”œâ”€ ì„±ê²© ì ìˆ˜: sessionStorageì—ì„œ êº¼ëƒ„
â”‚    â”‚   (personality_scores ì‚¬ìš©)
â”‚    â”œâ”€ API: POST /api/matching/recommend-xgboost
â”‚    â”‚   â””â”€ Request:
â”‚    â”‚      â”œâ”€ patient_id âœ… (sessionStorage)
â”‚    â”‚      â”œâ”€ patient_personality âœ… (sessionStorage)
â”‚    â”‚      â”œâ”€ preferred_days âœ… (UI ì„ íƒ)
â”‚    â”‚      â”œâ”€ preferred_time_slots âœ… (UI ì„ íƒ)
â”‚    â”‚      â”œâ”€ care_start_date âœ… (NEW - UI ì„ íƒ)
â”‚    â”‚      â””â”€ care_end_date âœ… (NEW - UI ì„ íƒ)
â”‚    â”‚
â”‚    â”œâ”€ API ì‘ë‹µ:
â”‚    â”‚   â””â”€ âœ… ì €ì¥: DB (matching_requests table)
â”‚    â”‚      â”œâ”€ patient_id
â”‚    â”‚      â”œâ”€ preferred_days
â”‚    â”‚      â”œâ”€ preferred_time_slots
â”‚    â”‚      â”œâ”€ care_start_date
â”‚    â”‚      â”œâ”€ care_end_date
â”‚    â”‚
â”‚    â”œâ”€ âœ… ì €ì¥: sessionStorage (ì„ì‹œ)
â”‚    â”‚   â””â”€ matching_results
â”‚    â””â”€ â†’ /caregiver-result-loading
â”‚
â”‚ 9. /caregiver-result-loading (3ì´ˆ ë¡œë”©)
â”‚    â””â”€ â†’ /caregiver-result-list (ë˜ëŠ” /caregiver-result-list)
â”‚
â”‚10. /caregiver-result-list
â”‚    â”œâ”€ XGBoost ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
â”‚    â”œâ”€ ê°„ë³‘ì¸ ì„ íƒ
â”‚    â””â”€ âœ… ì €ì¥: sessionStorage
â”‚        â””â”€ selectedCaregiver
â”‚    â””â”€ "ì¼€ì–´ í”Œëœ ìƒì„±" â†’ /care-plans-create
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 5: AI ì¼€ì–´ í”Œëœ ìƒì„±
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚11. /care-plans-create
â”‚    â”œâ”€ Step 1 (Loading - 3ì´ˆ)
â”‚    â”‚   â””â”€ API: POST /api/care-plans/generate
â”‚    â”‚      â”œâ”€ Request:
â”‚    â”‚      â”‚  â”œâ”€ patient_id âœ… (sessionStorage)
â”‚    â”‚      â”‚  â”œâ”€ caregiver_id âœ… (sessionStorage: selectedCaregiver)
â”‚    â”‚      â”‚  â””â”€ patient_personality âœ… (sessionStorage)
â”‚    â”‚      â”‚
â”‚    â”‚      â””â”€ Response: CarePlanResponse
â”‚    â”‚         â”œâ”€ patient_name
â”‚    â”‚         â”œâ”€ caregiver_name
â”‚    â”‚         â”œâ”€ summary
â”‚    â”‚         â”œâ”€ weekly_schedule (7ì¼ ì¼ì •)
â”‚    â”‚         â””â”€ caregiver_feedback
â”‚    â”‚
â”‚    â”œâ”€ âœ… ì €ì¥: formData (ìƒíƒœê´€ë¦¬)
â”‚    â”‚   â””â”€ carePlan ë°ì´í„°
â”‚    â”‚
â”‚    â”œâ”€ Step 2 (7ì¼ ì¼ì •)
â”‚    â”œâ”€ Step 3 (ê°„ë³‘ì¸ í”¼ë“œë°±)
â”‚    â”œâ”€ Step 4 (ìµœì¢… ê²€í† )
â”‚    â””â”€ â†’ /mypage-dashboard
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 6: ëŒ€ì‹œë³´ë“œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚12. /mypage-dashboard
â”‚    â””â”€ ë“±ë¡ëœ ì¼€ì–´ í”Œëœ í™•ì¸
â”‚    â””â”€ ë§¤ì¹­ ì •ë³´ í™•ì¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              âš ï¸  ë°ì´í„° ì†ì‹¤ ì§€ì 
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CRITICAL ISSUE 1: personality_scores DB ë¯¸ì €ì¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ìœ„ì¹˜: /personality-test (281-283ì¤„)
ë¬¸ì œ: sessionStorageì—ë§Œ ì €ì¥, DBì— ì €ì¥ ì•ˆ í•¨
ì˜í–¥:
  â”œâ”€ ë¡œê·¸ì¸ í›„ sessionStorage ì´ˆê¸°í™”ë˜ë©´ ì„±ê²© ë°ì´í„° ì†ì‹¤
  â””â”€ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë°ì´í„° ì†ì‹¤

í•´ê²°: /onboarding ë˜ëŠ” /patient-condition-1ì—ì„œ
      â†’ POST /api/personality/tests í˜¸ì¶œí•˜ì—¬ DBì— ì €ì¥


ğŸ”´ CRITICAL ISSUE 2: health_conditions ì„ì‹œ ì €ì¥ë§Œ í•¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ìœ„ì¹˜: /patient-condition-2
ë¬¸ì œ: ê±´ê°• ì •ë³´ê°€ sessionStorageì—ë§Œ ìˆê³  DB ì €ì¥ ë¡œì§ ë¶€ì¬
ì˜í–¥:
  â”œâ”€ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ë°ì´í„° ì†ì‹¤
  â””â”€ ì§„í–‰ ì¤‘ë‹¨ í›„ ì¬ì‹œì‘ ë¶ˆê°€ëŠ¥

í•´ê²°: /patient-condition-2 ë˜ëŠ” /patient-condition-3ì—ì„œ
      â†’ API: POST /api/patients/{patient_id}/health-conditions


ğŸŸ¡ ISSUE 3: care-plans ìƒì„± ì‹œ initialData ì˜ì¡´
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ìœ„ì¹˜: /care-plans-create
ë¬¸ì œ: formDataê°€ ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ê°’ í‘œì‹œ (fallback)
ì‹¤ì œ ì›ì¸: Azure OpenAI ìê²©ì¦ëª… ë¯¸ë¡œë“œ (ì´ë¯¸ ìˆ˜ì •ë¨)
           â”œâ”€ CarePlanGenerationService.__init__
           â””â”€ os.getenv() â†’ get_settings() ë³€ê²½ ì™„ë£Œ âœ…


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              ğŸ“Š ë°ì´í„° ì €ì¥ì†Œë³„ í˜„í™©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

sessionStorage (í´ë¼ì´ì–¸íŠ¸ ì„ì‹œ ì €ì¥):
â”œâ”€ âœ… personality_scores
â”œâ”€ âœ… personality_answers
â”œâ”€ âœ… patient_id
â”œâ”€ âœ… health_conditions (ì„ì‹œ)
â”œâ”€ âœ… selectedCaregiver
â””â”€ âœ… matching_results

Database (ì˜êµ¬ ì €ì¥):
â”œâ”€ âœ… PatientPersonality (ì„±ê²© ì ìˆ˜) - BUT ì €ì¥ API í˜¸ì¶œ í•„ìš”!
â”œâ”€ âœ… HealthCondition (ê±´ê°• ì •ë³´) - /patient-condition-3ì—ì„œë§Œ ì•½ë¬¼
â”œâ”€ âœ… Medication (ì•½ë¬¼) - âœ… ì €ì¥ë¨
â”œâ”€ âœ… MatchingRequest (ë§¤ì¹­ ìš”ì²­) - âœ… ì €ì¥ë¨ (care_period í¬í•¨)
â”œâ”€ âš ï¸  PatientPersonality (AI ë¶„ì„) - sessionStorageì—ë§Œ ìˆìŒ!
â””â”€ âš ï¸  CaregiverPersonality - DBì— ìˆì§€ë§Œ ì‚¬ìš© ì•ˆ í•¨

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
